# CSV 백업 가이드

## 📋 개요

Admin 대시보드에서 **CSV 다운로드** 기능을 통해 전체 매뉴얼 데이터를 백업할 수 있습니다.

## 🎯 주요 기능

### ✅ CSV 다운로드 (백업)

현재 매뉴얼의 모든 데이터를 CSV 파일로 다운로드합니다.

**포함 데이터:**
- 모든 카테고리 정보
- 모든 페이지 정보
- 한국어/영어 번역
- 페이지 레이아웃 설정
- 필드별 콘텐츠

**파일명 형식:**
```
dms-manual-backup-YYYY-MM-DD.csv
```

## 📊 CSV 파일 구조

```csv
category_id,page_id,layout,field,KO,EN
signup,join-dms,default,title,대표 관리자 회원가입,Super Admin Signup
signup,join-dms,default,intro,DMS를 사용할...,Create a super admin...
signup,join-dms,default,step1.title,계정 정보 입력,Enter Account Information
```

### 컬럼 설명

| 컬럼 | 설명 | 예시 |
|------|------|------|
| `category_id` | 대메뉴 ID | `signup`, `login`, `member` |
| `page_id` | 페이지 ID | `join-dms`, `login-admin` |
| `layout` | 페이지 레이아웃 | `default`, `features`, `accordion` |
| `field` | 필드명 | `title`, `intro`, `step1.title` |
| `KO` | 한국어 텍스트 | `대표 관리자 회원가입` |
| `EN` | 영어 텍스트 | `Super Admin Signup` |

## 🔄 백업 권장 사항

### 백업 시점

다음 작업 **전에** 반드시 백업하세요:

1. ✅ **대량 데이터 수정 전**
   - 여러 페이지를 한꺼번에 수정할 때
   - 카테고리 구조 변경 시

2. ✅ **중요한 수정 전**
   - 핵심 콘텐츠 변경 시
   - 번역 대량 수정 시

3. ✅ **정기 백업**
   - 주 1회 정기 백업 권장
   - 월말 백업 필수

### 백업 파일 관리

```
/backups/
  ├── dms-manual-backup-2025-01-01.csv
  ├── dms-manual-backup-2025-01-08.csv
  ├── dms-manual-backup-2025-01-15.csv
  └── dms-manual-backup-2025-01-31.csv  ← 월말 백업
```

## 📁 엑셀에서 CSV 열기

### UTF-8 인코딩 문제 해결

CSV 파일을 엑셀에서 바로 열면 한글이 깨질 수 있습니다.

**올바른 방법:**

1. **엑셀 실행**
2. **데이터 > 텍스트/CSV에서** 선택
3. **파일 선택** → CSV 파일
4. **파일 원본**: `65001: 유니코드 (UTF-8)` 선택
5. **구분 기호**: 쉼표
6. **로드** 클릭

## 🚫 CSV 업로드 기능 제거 이유

### 왜 업로드 기능을 제거했나요?

1. **형식 오류 다발**
   - 엑셀/구글 스프레드시트에서 CSV 저장 시 인코딩 문제
   - 컬럼명에 공백/특수문자 포함 오류
   - `category_id`, `page_id` 형식 오류

2. **Admin UI가 더 안전**
   - 실시간 검증
   - 오류 즉시 확인
   - 페이지별 독립 편집

3. **데이터 정합성**
   - Admin UI는 메뉴 구조와 자동 동기화
   - CSV는 수동 매핑 필요 → 오류 가능성

### 데이터 편집은 어떻게?

✅ **Admin 대시보드에서 직접 편집**
- 카테고리 추가: "대메뉴 추가" 버튼
- 페이지 추가: "소메뉴 추가" 버튼
- 콘텐츠 수정: 페이지 편집 화면

## 🔧 CSV 활용 방법

### 1. 백업 및 복원

**백업:**
```
Admin → CSV 다운로드 → 파일 저장
```

**복원 (수동):**
```
CSV 파일 확인 → Admin에서 수동 입력
```

### 2. 데이터 검토

CSV 파일을 열어서:
- 번역 일관성 확인
- 누락된 필드 체크
- 중복 데이터 확인

### 3. 외부 번역팀 협업

1. CSV 다운로드
2. 번역팀에 전달 (EN 컬럼만 편집)
3. 번역 완료된 CSV 확인
4. Admin에서 수동으로 EN 번역 업데이트

## ⚠️ 주의사항

### 자동 생성 키 제외

CSV 다운로드 시 다음 키는 **제외**됩니다:
- `category.*` - 카테고리 제목 (자동 생성)
- `section.*` - 섹션 제목 (자동 생성)

이 키들은 `{page_id}.title`에서 자동으로 생성되므로 CSV에 포함할 필요가 없습니다.

### 인코딩

- 다운로드된 CSV는 **UTF-8** 인코딩
- 엑셀에서 열 때 반드시 UTF-8로 지정

## 📞 문제 해결

### CSV 다운로드 실패

**증상:** "다운로드 중 오류가 발생했습니다."

**해결:**
1. 브라우저 콘솔 로그 확인
2. 네트워크 탭에서 서버 응답 확인
3. Admin 대시보드 새로고침 후 재시도

### 한글 깨짐

**증상:** 엑셀에서 한글이 `깨짐` 또는 `???`

**해결:**
1. 엑셀 직접 열기 ❌
2. "데이터 > 텍스트/CSV에서" 사용 ✅
3. UTF-8 인코딩 선택 ✅

## 🎯 Best Practices

1. **정기 백업**
   - 매주 월요일 오전에 백업
   - 월말에 별도 백업

2. **백업 파일 보관**
   - 로컬 PC에 저장
   - 클라우드 스토리지에 업로드 (Dropbox, Google Drive)
   - 최소 3개월치 보관

3. **수정 전 백업**
   - 대량 수정 전 반드시 백업
   - 백업 파일명에 수정 내용 메모
     ```
     dms-manual-backup-2025-01-15-signup-pages-update.csv
     ```

4. **검증**
   - 백업 파일을 열어서 데이터 무결성 확인
   - 행 개수, 카테고리 개수 확인

---

## 요약

| 기능 | 상태 | 용도 |
|------|------|------|
| CSV 다운로드 | ✅ 지원 | 백업, 검토, 외부 협업 |
| CSV 업로드 | ❌ 제거 | Admin UI로 대체 |
| 데이터 편집 | ✅ Admin UI | 안전하고 직관적 |

**핵심:** CSV는 **백업 전용**, 편집은 **Admin 대시보드**에서!
